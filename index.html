<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BlockchainCallBackHandler</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#blockchain-interaction-documentation">BlockChain Interaction Documentation</a>
<ul>
<li><a href="#whats-included">What’s included?</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#access">Access</a></li>
<li><a href="#how-to-use">How to use?</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="blockchain-interaction-documentation">BlockChain Interaction Documentation</h1>
<h2 id="whats-included">What’s included?</h2>
<pre class=" language-mermaid"><svg id="mermaid-svg-nxFPmiqaLG16Rq77" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="282.8500061035156" style="max-width: 544.3687744140625px;" viewBox="0 0 544.3687744140625 282.8500061035156"><style>#mermaid-svg-nxFPmiqaLG16Rq77{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-nxFPmiqaLG16Rq77 .error-icon{fill:#552222;}#mermaid-svg-nxFPmiqaLG16Rq77 .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-nxFPmiqaLG16Rq77 .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-nxFPmiqaLG16Rq77 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-nxFPmiqaLG16Rq77 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-nxFPmiqaLG16Rq77 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-nxFPmiqaLG16Rq77 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-nxFPmiqaLG16Rq77 .marker{fill:#666;stroke:#666;}#mermaid-svg-nxFPmiqaLG16Rq77 .marker.cross{stroke:#666;}#mermaid-svg-nxFPmiqaLG16Rq77 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-nxFPmiqaLG16Rq77 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#000000;}#mermaid-svg-nxFPmiqaLG16Rq77 .cluster-label text{fill:#333;}#mermaid-svg-nxFPmiqaLG16Rq77 .cluster-label span{color:#333;}#mermaid-svg-nxFPmiqaLG16Rq77 .label text,#mermaid-svg-nxFPmiqaLG16Rq77 span{fill:#000000;color:#000000;}#mermaid-svg-nxFPmiqaLG16Rq77 .node rect,#mermaid-svg-nxFPmiqaLG16Rq77 .node circle,#mermaid-svg-nxFPmiqaLG16Rq77 .node ellipse,#mermaid-svg-nxFPmiqaLG16Rq77 .node polygon,#mermaid-svg-nxFPmiqaLG16Rq77 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-svg-nxFPmiqaLG16Rq77 .node .label{text-align:center;}#mermaid-svg-nxFPmiqaLG16Rq77 .node.clickable{cursor:pointer;}#mermaid-svg-nxFPmiqaLG16Rq77 .arrowheadPath{fill:#333333;}#mermaid-svg-nxFPmiqaLG16Rq77 .edgePath .path{stroke:#666;stroke-width:1.5px;}#mermaid-svg-nxFPmiqaLG16Rq77 .flowchart-link{stroke:#666;fill:none;}#mermaid-svg-nxFPmiqaLG16Rq77 .edgeLabel{background-color:white;text-align:center;}#mermaid-svg-nxFPmiqaLG16Rq77 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-svg-nxFPmiqaLG16Rq77 .cluster rect{fill:hsl(210,66.6666666667%,95%);stroke:#26a;stroke-width:1px;}#mermaid-svg-nxFPmiqaLG16Rq77 .cluster text{fill:#333;}#mermaid-svg-nxFPmiqaLG16Rq77 .cluster span{color:#333;}#mermaid-svg-nxFPmiqaLG16Rq77 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(-160,0%,93.3333333333%);border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-nxFPmiqaLG16Rq77:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-nxFPmiqaLG16Rq77 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-A LE-C" id="L-A-C" style="opacity: 1;"><path class="path" d="M223.56176090886348,54.712501525878906L139.4375,93.06875133514404L139.4375,131.42500114440918" marker-end="url(https://stackedit.io/app#arrowhead52)" style="fill:none"></path><defs><marker id="arrowhead52" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-G" id="L-C-G" style="opacity: 1;"><path class="path" d="M139.4375,178.1375026702881L139.4375,203.1375026702881L139.4375,228.1375026702881" marker-end="url(https://stackedit.io/app#arrowhead53)" style="fill:none"></path><defs><marker id="arrowhead53" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"><path class="path" d="M326.01324366877327,54.712501525878906L410.1375045776367,93.06875133514404L410.1375045776367,131.42500114440918" marker-end="url(https://stackedit.io/app#arrowhead54)" style="fill:none"></path><defs><marker id="arrowhead54" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(139.4375,93.06875133514404)" style="opacity: 1;"><g transform="translate(-115.8687515258789,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="231.7375030517578" height="26.712499618530273"></rect><foreignObject width="231.7375030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-A-C" class="edgeLabel L-LS-A' L-LE-C">BlockChainCallbackHandler&lt;int&gt;</span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-C-G" class="edgeLabel L-LS-C' L-LE-G"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(410.1375045776367,93.06875133514404)" style="opacity: 1;"><g transform="translate(-126.23125457763672,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="252.46250915527344" height="26.712499618530273"></rect><foreignObject width="252.46250915527344" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B">BlockChainCallbackHandler&lt;string&gt;</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-A-175" transform="translate(274.78750228881836,31.356250762939453)" style="opacity: 1;"><rect rx="5" ry="5" x="-107.6500015258789" y="-23.356249809265137" width="215.3000030517578" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-97.6500015258789,-13.356249809265137)"><foreignObject width="195.3000030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">BlockChainCallbackHandler</div></foreignObject></g></g></g><g class="node default" id="flowchart-C-176" transform="translate(139.4375,154.78125190734863)" style="opacity: 1;"><rect rx="5" ry="5" x="-131.4375" y="-23.356249809265137" width="262.875" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-121.4375,-13.356249809265137)"><foreignObject width="242.875" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">TransactionStatusCallbackHandler</div></foreignObject></g></g></g><g class="node default" id="flowchart-G-177" transform="translate(139.4375,251.49375343322754)" style="opacity: 1;"><rect rx="0" ry="0" x="-50.82500076293945" y="-23.356249809265137" width="101.6500015258789" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-40.82500076293945,-13.356249809265137)"><foreignObject width="81.6500015258789" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">GetStatus()</div></foreignObject></g></g></g><g class="node default" id="flowchart-B-179" transform="translate(410.1375045776367,154.78125190734863)" style="opacity: 1;"><rect rx="5" ry="5" x="-89.26250457763672" y="-23.356249809265137" width="178.52500915527344" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-79.26250457763672,-13.356249809265137)"><foreignObject width="158.52500915527344" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">StringCallbackHandler</div></foreignObject></g></g></g></g></g></g></svg></pre>

<table>
<thead>
<tr>
<th>Child Of StringCallbackHandler</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>ItemAttributesCallbackHandler</td>
<td>GetItemAttributes()</td>
</tr>
<tr>
<td>PlayerAttributesCallbackHandler</td>
<td>GetCharacterAttributes()</td>
</tr>
<tr>
<td>CreateCharacterCallbackHandler</td>
<td>CreateCharacter()</td>
</tr>
<tr>
<td>CharacterStatsCallbackHandler</td>
<td>GetCharacterStats()</td>
</tr>
<tr>
<td>ClaimBlockCallbackHandler</td>
<td>ClaimBlock()</td>
</tr>
<tr>
<td>CraftItemCallbackHandler</td>
<td>CraftItem()</td>
</tr>
<tr>
<td>GatherResourcesCallbackHandler</td>
<td>GatherResources()</td>
</tr>
</tbody>
</table><h2 id="functions">Functions</h2>

<table>
<thead>
<tr>
<th>File</th>
<th>Function</th>
<th>Return Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ItemAttributesCallbackHandler</td>
<td>GetItemAttributes (int ItemID, Action callback)</td>
<td>ItemInfo(struct)</td>
<td>Returns a ItemInfo object given an Item ID</td>
</tr>
<tr>
<td>PlayerAttributesCallbackHandler</td>
<td>GetCharacterAttributes (int CharacterID,  Action callback)</td>
<td>PlayerAttributes(struct)</td>
<td>Returns a PlayerAttributes object  given a Character ID</td>
</tr>
<tr>
<td>CreateCharacterCallbackHandler</td>
<td>CreateCharacter (PlayerAttributes a, Action callback)</td>
<td>Transaction ID(string)</td>
<td>Unsafely creates a character  given a PlayerAttributes object, &gt;returning a Transaction ID of that transaction</td>
</tr>
<tr>
<td>CharacterStatsCallbackHandler</td>
<td>GetCharacterStats (int CharacterID,  Action callback)</td>
<td>CharacterStats(struct)</td>
<td>Returns a PlayerAttributes object given a Character ID</td>
</tr>
<tr>
<td>ClaimBlockCallbackHandler</td>
<td>ClaimBlock(int x, int y, Action callback)</td>
<td>Transaction ID(string)</td>
<td>Claim a block on chain, returns the transaction Id of the action</td>
</tr>
<tr>
<td>CraftItemCallbackHandler</td>
<td>CraftItem(int recipeId, int[] materials,  Action callback)</td>
<td>Transaction ID(string)</td>
<td>Craft items on chain, returns the transaction Id of the action</td>
</tr>
<tr>
<td>GatherResourcesCallbackHandler</td>
<td>GatherResources(int[] x, int[] y, uint[] resourceType,  uint[] amount, Action callback)</td>
<td>Transaction ID(string)</td>
<td>Gather resources from set of blocks, with corre- sponding resouceType and amount, returns the transaction Id of the action</td>
</tr>
<tr>
<td>TransactionStatusCallbackHandler</td>
<td>GetStatus(string TxID, Action callback)</td>
<td>status(int)</td>
<td>Returns an int indicating the status of a  Transaction ID.  If result is 0: transaction succeeded  If result is 1: transaction failed  If result is 2: transaction pending  or not exist (invalid transaction ID)</td>
</tr>
</tbody>
</table><h2 id="access">Access</h2>
<p>You should access these functions as follow:</p>
<pre class=" language-c"><code class="prism # language-c">EthCallbacks<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token punctuation">(</span>CallbackHandler<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span>
</code></pre>
<h2 id="how-to-use">How to use?</h2>
<p><strong>Example 1</strong><br>
Get the status of a TransactionID using GetStatus()</p>
<pre class=" language-c"><code class="prism # language-c"><span class="token comment">//USE IT IN A COROUTINE!</span>
string TxID<span class="token operator">=</span><span class="token string">"transaction ID you have"</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> statusCallback <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
yield <span class="token keyword">return</span> <span class="token function">GetStatus</span><span class="token punctuation">(</span>TxID<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>statusCallback <span class="token operator">=</span> i<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Example 2</strong><br>
Create an character on chain using CreateCharacter() and base on the status of the Transaction, instantiate the characater in the scene</p>
<pre class=" language-c"><code class="prism # language-c">private IEnumerator <span class="token function">CreateCharacterOnChain</span><span class="token punctuation">(</span>PlayerAttributes a<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        string TxID <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//initialize an empty string to hold the incoming transaction id</span>
        <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//initialize a unvalid int to hold the incoming transaction status</span>
        yield <span class="token keyword">return</span> EthCallbacks<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>createCharacterCallbackHandler<span class="token punctuation">.</span><span class="token function">CreateCharacter</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
            TxID <span class="token operator">=</span> s<span class="token punctuation">;</span><span class="token comment">//receive the callback transaction id </span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        yield <span class="token keyword">return</span> EthCallbacks<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>transactionStatusCallbackHandler<span class="token punctuation">.</span><span class="token function">GetStatus</span><span class="token punctuation">(</span>TxID<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
            status <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token comment">//receive the callback transaction status</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>success
                OurCharacterSwitchManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GenerateCharacterLocal</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
                MMTransactionEvent<span class="token punctuation">.</span><span class="token function">Trigger</span><span class="token punctuation">(</span>MMTransactionEventType<span class="token punctuation">.</span>CreateCharacterSuccess<span class="token punctuation">,</span> TxID<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>failed
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Could not Create Character:Transaction Failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                MMTransactionEvent<span class="token punctuation">.</span><span class="token function">Trigger</span><span class="token punctuation">(</span>MMTransactionEventType<span class="token punctuation">.</span>CreateCharacterFailure<span class="token punctuation">,</span> TxID<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>pending or not exist
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Could not Create Character:Transaction Pending or Not Exist!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                MMTransactionEvent<span class="token punctuation">.</span><span class="token function">Trigger</span><span class="token punctuation">(</span>MMTransactionEventType<span class="token punctuation">.</span>CreateCharacterFailure<span class="token punctuation">,</span> TxID<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre>

    </div>
  </div>
</body>

</html>
